<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lí menu nhà hàng</title>
</head>
<body>
    <script>
        let crud = "Xin chào!\nMời bạn nhập C để thêm món ăn, R để xem menu," 
                 + " U để update món ăn, D để xoá món ăn khỏi menu, và Q để"
                 + " thoát khỏi chương trình:"
        let menu = ["rau xào", "thịt luộc", "gà rán"];
        localStorage.setItem("menu", JSON.stringify(menu));
        getUserInput();

        function create() {
            let menu = JSON.parse(localStorage.getItem("menu"));
            let newItem 
            = prompt("Mời người dùng nhập món ăn muốn thêm vào menu:");
            menu.push(newItem);
            localStorage.setItem("menu", JSON.stringify(menu));
            alert("Đã thêm món ăn! Menu hiện tại:\n" + menu.join(", "));
        }
        
        function read() {
            let menu = JSON.parse(localStorage.getItem("menu"));
            alert("Menu hiện tại:\n" + menu.join(", "));
        }

        function update() {
            let menu = JSON.parse(localStorage.getItem("menu"));
            let oldItem = prompt("Menu hiện tại:\n" + menu.join(", ") 
                          + "\nMời người dùng nhập vào tên món muốn update:");
            if (menu.indexOf(oldItem) == -1) {
                oldItem = prompt("Món ăn không tồn tại!" +
                                 " Xin hãy nhập tên món ăn khác!");
            } else if (oldItem == null) {
                oldItem = prompt("Xin hãy nhập tên món ăn!");
            }

            let newItem = prompt("Mời người dùng nhập vào tên món mới:");
            if (newItem == null) {
                newItem = prompt("Xin hãy nhập tên món ăn!");
            }

            menu[menu.indexOf(oldItem)] = newItem;
            localStorage.setItem("menu", JSON.stringify(menu));
            alert("Đã update món ăn! Menu hiện tại:\n" + menu.join(", "));
        }

        function deleteItem() {
            let menu = JSON.parse(localStorage.getItem("menu"));
            let deleteItem = prompt("Menu hiện tại:\n" + menu.join(", ") 
                             + "\nMời người dùng nhập vào tên món muốn xoá:");
            if (deleteItem == null) {
                deleteItem = prompt("Xin hãy nhập tên món ăn!");
            } else if (menu.indexOf(deleteItem) == -1) {
                deleteItem = prompt("Món ăn không tồn tại!" +
                                    " Xin hãy nhập tên món ăn khác!");
            }
            menu.splice(menu.indexOf(deleteItem), 1);
            localStorage.setItem("menu", JSON.stringify(menu));
            alert("Đã xoá món ăn! Menu hiện tại:\n" + menu.join(", "));
        }



        function getUserInput() {
            let input = prompt(crud);
            input = input.toUpperCase();

            while (input != "Q") {
                if (input == "C") {
                    create();
                } else if (input == "R") {
                    read();
                } else if (input == "U") {
                    update();
                } else if (input == "D") {
                    deleteItem();
                } else {
                    alert("Cu phap khong hop le!");
                }
                input = prompt(crud);
                input = input.toUpperCase();
            }
        }

        
    </script>
</body>
</html>